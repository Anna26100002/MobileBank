#:import RGBA kivy.utils.rgba


<MainWindow>:
    on_enter:
    card: number_card

    MDToolbar:
        title: "Вход и регистрация по карте"
        elevation: 7
        pos_hint: {"top": 1.015}
        md_bg_color: 0.28,0.28,0.28,1
        specific_text_color: 0,72,35,1


    Button:
        check_number_card: app.check_number_card
        size_hint:1,0.1
        color: 0,.76,.91, 1
        pos: 0,5
        pos_hint: {'center_x': 0.5, 'bottom': 1}
        font_size: 25
        text: 'Продолжить'
        on_press:
            self.check_number_card = root.Number_Card()
            if self.check_number_card == "Yes":  root.Perexod_To_SecondWindows()


    TextInput:
        id: number_card
        multiline: False
        size_hint: 0.95, 0.065
        background_color: 1.2,1.2,1.2,1
        password: True
        pos_hint: {'center_x': 0.5, 'center_y': 0.5}
        font_size: 14

    Label:
        id: just
        color: .1,.1,.1, 1
        text: 'Введите номер карты'
        pos_hint: {'top': 1.10, 'bottom': 0.5}
        font_size: 15

    Label:
        text: 'Добро пожаловать в банковское приложение!'
        color: .1,.1,.1, 1
        pos_hint: {'top': 1.20, 'bottom': 0.5}
        font_size: 15









<SecondWindow>:
    on_enter: app.Send_Server_Live_Check(), app.Info_User(), root.Info_Client()


    one_Num_text: Number_1_text
    two_Num_text: Number_2_text
    third_Num_text: Number_3_text
    four_Num_text: Number_4_text
    five_Num_text: Number_5_text

    MDToolbar:
        title: "Придумайте пароль"
        elevation: 7
        pos_hint: {"top": 1.015}
        md_bg_color: 0.28,0.28,0.28,1
        specific_text_color: 0,72,35,1

    Button:
        size_hint:1,0.1
        pos: 0,5
        text: "Продолжить"
        color: 0,.76,.91, 1
        check_pass: app.check_pass
        pos_hint: {'center_x': 0.5, 'bottom': 1}
        font_size: 25
        on_press:
            self.check_pass = root.Check_Password()
            if self.check_pass == "Yes": root.Perexod_To_Wait()



    Label:
        text: "Придумайте 5-значный пароль"
        color: .1,.1,.1, 1
        pos_hint: {'top': 1.3, 'bottom': 0.5}
        font_size: 17

    Label:
        text: "В дальнейшем он будет использоваться для"
        color: .1,.1,.1, 1
        pos_hint: {'top': 1.10, 'bottom': 0.5}
        font_size: 13

    Label:
        text: "входа в приложение"
        color: .1,.1,.1, 1
        pos_hint: {'top': 1.05, 'bottom': 0.5}
        font_size: 13

    Label:
        id: Number_1_text
        color: .1,.1,.1, 1
        text: "*"
        pos: -100,100
        font_size: 25

    Label:
        id: Number_2_text
        color: .1,.1,.1, 1
        text: "*"
        pos: -50,100
        font_size: 25

    Label:
        id: Number_3_text
        color: .1,.1,.1, 1
        text: "*"
        pos: 0,100
        font_size: 25

    Label:
        id: Number_4_text
        color: .1,.1,.1, 1
        text: "*"
        pos: 50,100
        font_size: 25

    Label:
        id: Number_5_text
        color: .1,.1,.1, 1
        text: "*"
        pos: 100,100
        font_size: 25

    Label:
        text: "_"
        color: .1,.1,.1, 1
        pos: -100,95
        font_size: 25

    Label:
        text: "_"
        color: .1,.1,.1, 1
        pos: -50,95
        font_size: 25

    Label:
        text: "_"
        color: .1,.1,.1, 1
        pos: 0,95
        font_size: 25

    Label:
        text: "_"
        color: .1,.1,.1, 1
        pos: 50,95
        font_size: 25

    Label:
        text: "_"
        color: .1,.1,.1, 1
        pos: 100,95
        font_size: 25

    GridLayout:

        cols: 3
        size: 20, 10
        padding: 20
        spacing: 5
        pos_hint: {'top': 0.55, 'bottom': 1.5}
        row_default_height: 40
        row_force_default: True

        Button:
            id: Number_1
            background_color: 100,100,100,1
            color: .1,.1,.1, 1
            text: "1"
            font_size: 20
            size_hint: .15, .1
            on_press:  root.Password_add(self)

        Button:
            id: Number_2
            background_color: 100,100,100,1
            color: .1,.1,.1, 1
            text: "2"
            font_size: 20
            size_hint: .15, .1
            on_press: root.Password_add(self)


        Button:
            id: Number_3
            background_color: 100,100,100,1
            color: .1,.1,.1, 1
            text: "3"
            font_size: 20
            size_hint: .15, .1
            on_press: root.Password_add(self)

        Button:
            id: Number_4
            background_color: 100,100,100,1
            color: .1,.1,.1, 1
            text: "4"
            font_size: 20
            size_hint: .15, .1
            on_press: root.Password_add(self)

        Button:
            id: Number_5
            background_color: 100,100,100,1
            color: .1,.1,.1, 1
            text: "5"
            font_size: 20
            size_hint: .15, .1
            on_press: root.Password_add(self)

        Button:
            id: Number_6
            background_color: 100,100,100,1
            text: "6"
            color: .1,.1,.1, 1
            font_size: 20
            size_hint: .15, .1
            on_press: root.Password_add(self)

        Button:
            id: Number_7
            text: "7"
            background_color: 100,100,100,1
            color: .1,.1,.1, 1
            font_size: 20
            size_hint: .15, .1
            on_press: root.Password_add(self)

        Button:
            id: Number_8
            text: "8"
            background_color: 100,100,100,1
            color: .1,.1,.1, 1
            font_size: 20
            size_hint: .15, .1
            on_press: root.Password_add(self)

        Button:
            id: Number_9
            text: "9"
            background_color: 100,100,100,1
            color: .1,.1,.1, 1
            font_size: 20
            size_hint: .15, .1
            on_press: root.Password_add(self)

        Label:
            text: ""
            size_hint: .15, .1

        Button:
            id: Number_0
            text: "0"
            background_color: 100,100,100,1
            color: .1,.1,.1, 1
            font_size: 20
            size_hint: .15, .1
            on_press: root.Password_add(self)

        Button:
            id: Clear
            background_color: 100,100,100,1
            color: .1,.1,.1, 1
            text: "<"
            font_size: 20
            size_hint: .15, .1
            on_press: root.Password_clear(self)
            on_release: root.clear_inputs([context_input, ura_file_name])










<WindowsWait>:
    text_surname: text_surname
    text_name: text_name

    on_pre_enter:
        root.Zastavka()

    on_enter:
        root.Wait()
        if root.op == 10: root.manager.current = "Windows3"
        root.manager.transition.direction = "left"



    MDToolbar:
        elevation: 10
        pos_hint: {"top": 1.015}
        md_bg_color: 0.28,0.28,0.28,1


    Label:
        text: "Добро пожаловать,"
        font_size: 24
        color: .1,.1,.1, 1
        pos_hint: {'top': 1.15, 'center_x': 0.50}

    Label:
        id: text_surname
        text: ""
        font_size: 24
        color: .1,.1,.1, 1
        pos_hint: {'top': 1, 'center_x': 0.60}

    Label:
        id: text_name
        text: ""
        font_size: 24
        color: .1,.1,.1, 1
        pos_hint: {'top': 1, 'center_x': 0.25}

    Label:
        text:"!"
        font_size: 24
        color: .1,.1,.1, 1
        pos_hint: {'top': 1, 'center_x': 0.80}







<Windows3>:
    on_enter: app.Send_Server_Command_Kurs_Valut(), root.Credit_Card()
    on_leave: root.Clear_Credit_Card()

    ScrollView:
        size_hint: 1, .5
        pos_hint: {'top': 0.80, 'bottom': 1.5}

        MDList:
            id: osnova_credit_card


    MDToolbar:
        title: "Главная"
        elevation: 7
        pos_hint: {"top": 1.015}
        md_bg_color: 0.28,0.28,0.28,1
        specific_text_color: 0,72,35,1


    Label:
        text: "Основная карта"
        pos_hint: {'top': 1.33, 'center_x': 0.25}
        color: .1,.1,.1, 1
        font_size: 20



    GridLayout:
        cols: 1
        size: 10, 10
        padding: 2.5
        spacing: 5
        pos_hint: {'top': 0.48, 'bottom': 1.5}
        row_default_height: 40
        row_force_default: True

        Button:
            text: "Посмотреть карты"
            font_size: 19
            size_hint:0.9 ,0.1
            halign: 'left'
            valign: 'center'
            text_size: 325,325
            color: 0,.76,.91, 1
            on_press: root.Perexod_Credit_Card()

        Button:
            text: "Курсы валют"
            font_size: 19
            size_hint:0.9 ,0.1
            color: 0,.76,.91, 1
            halign: 'left'
            valign: 'center'
            text_size: 325,325
            on_press: root.Perexod_Kurs()

        Button:
            text: "Найти банкомат"
            font_size: 19
            size_hint: 0.9 ,0.1
            halign: 'left'
            valign: 'center'
            text_size: 325,325
            color: 0,.76,.91, 1
            on_press: root.Perexod_Map()

        Button:
            text: "Перевести на другую карту"
            font_size: 19
            size_hint: 0.9 ,0.1
            halign: 'left'
            valign: 'center'
            text_size: 325,325
            color: 0,.76,.91, 1
            on_press: root.Perexod_Pay()

        Button:
            text: "История переводов"
            font_size: 19
            size_hint: 0.9 ,0.1
            halign: 'left'
            valign: 'center'
            text_size: 325,325
            color: 0,.76,.91, 1
            on_press: root.Perexod_Istoria_Pay()


<WindowsKurs>:
    on_enter: root.Check_Value_Kurs()

    MDToolbar:
        title: "Курсы валют"
        elevation: 7
        pos_hint: {"top": 1.015}
        md_bg_color: 0.28,0.28,0.28,1
        specific_text_color: 0,72,35,1

    Button:
        text: "Вернуться в меню"
        size_hint:1,0.1
        color: 0,.76,.91, 1
        pos_hint: {'center_x': 0.5, 'bottom': 1}
        font_size: 25
        on_press: root.Back_Perexod()


    Label:
        text: "$: USD"
        color: .1,.1,.1, 1
        pos_hint: {'top': 1.20, 'center_x': .15}
        font_size: 20

    Label:
        text: root.text_value_USD
        color: .1,.1,.1, 1
        pos_hint: {'top': 1.20, 'center_x': .50}
        font_size: 20

    Label:
        text: root.text_value_sell_USD
        color: .1,.1,.1, 1
        pos_hint: {'top': 1.2, 'center_x': .80}
        font_size: 20

    Label:
        text: "€: EUR"
        color: .1,.1,.1, 1
        pos_hint: {'top': 1.05, 'center_x': .15}
        font_size: 20


    Label:
        text: root.text_value_EUR
        color: .1,.1,.1, 1
        pos_hint: {'top': 1.05, 'center_x': .50}
        font_size: 20

    Label:
        text: root.text_value_sell_EUR
        color: .1,.1,.1, 1
        pos_hint: {'top': 1.05, 'center_x': .80}
        font_size: 20

    Label:
        text: "£: UKL"
        color: .1,.1,.1, 1
        pos_hint: {'top': 0.9, 'center_x': .15}
        font_size: 20

    Label:
        text: root.text_value_GBP
        color: .1,.1,.1, 1
        pos_hint: {'top': 0.9, 'center_x': .50}
        font_size: 20

    Label:
        text: root.text_value_sell_GBP
        color: .1,.1,.1, 1
        pos_hint: {'top': 0.9, 'center_x': .80}
        font_size: 20


    Label:
        text: "₺: TRY"
        color: .1,.1,.1, 1
        pos_hint: {'top': 0.75, 'center_x': .15}
        font_size: 20

    Label:
        text: root.text_value_TRY
        color: .1,.1,.1, 1
        pos_hint: {'top': 0.75, 'center_x': .50}
        font_size: 20


    Label:
        text: root.text_value_sell_TRY
        color: .1,.1,.1, 1
        pos_hint: {'top': 0.75, 'center_x': .80}
        font_size: 20


    Label:
        text: "Валюта"
        color: .1,.1,.1, 1
        pos_hint: {'top': 1.3, 'center_x': .15}


    Label:
        text: "Купить"
        color: .1,.1,.1, 1
        pos_hint: {'top': 1.3, 'center_x': .50}


    Label:
        text: "Продать"
        color: .1,.1,.1, 1
        pos_hint: {'top': 1.3, 'center_x': .80}


<WindowsCreditMenu>:
    on_enter: app.Info_User_Card_Other(), root.Credit_Card_Other(), root.Credit_Card_Osnova()
    on_leave: root.Clear()

    MDToolbar:
        title: "Карты"
        elevation: 7
        pos_hint: {"top": 1.015}
        md_bg_color: 0.28,0.28,0.28,1
        specific_text_color: 0,72,35,1

    Button:
        size_hint: 1,0.1
        text: "Вернуться в меню"
        color: 0,.76,.91, 1
        font_size: 25
        on_press: root.Back_Menu()

    Label:
        text: "Основная карта"
        color: .1,.1,.1, 1
        font_size: 20
        pos_hint: {'top': 1.33, 'center_x': .25}

    Label:
        text: "Дополнительные карты"
        color: .1,.1,.1, 1
        font_size: 20
        pos_hint: {'top': 1.15, 'center_x': .36}

    ScrollView:
        size_hint: 1, .5
        pos_hint: {'top': 0.60, 'bottom': 1.5}

        MDList:
            id: container

    ScrollView:
        size_hint: 1, .2
        pos_hint: {'top': 0.85, 'bottom': 1.5}

        MDList:
            id: container_1

<WindowsIstoriaPay>:
    on_enter: app.Histori_Operation(), root.Create_Table(), root.Open_Table()
    on_leave: root.Clear_Table()


    Button:
        size_hint:1,0.1
        text: "Вернуться в меню"
        color: 0,.76,.91, 1
        font_size: 25
        on_press: root.Back_Menu()

    MDToolbar:
        title: "История переводов"
        elevation: 7
        pos_hint: {"top": 1.015}
        md_bg_color: 0.28,0.28,0.28,1
        specific_text_color: 0,72,35,1

    ScrollView:
        size_hint: 1, 0.75
        pos_hint: {'top': 0.9, 'bottom': 1.5}

        MDList:
            id: histori_pay


<WindowsPass>:
    on_enter: app.Find_SurnameName_Password(), root.Info_Client_ID()

    one_Num_text: Number_1_text
    two_Num_text: Number_2_text
    third_Num_text: Number_3_text
    four_Num_text: Number_4_text
    five_Num_text: Number_5_text

    Button:
        size_hint:1,0.1
        pos: 0,5
        text: "Продолжить"
        color: 0,.76,.91, 1
        check_pass: app.check_pass
        pos_hint: {'center_x': 0.5, 'bottom': 1}
        font_size: 25
        on_press:
            self.check_pass = root.Check_Password()
            if self.check_pass == "Yes": root.Perexod_To_Wait()


    MDToolbar:
        title: "Вход в приложение"
        elevation: 7
        pos_hint: {"top": 1.015}
        md_bg_color: 0.28,0.28,0.28,1
        specific_text_color: 0,72,35,1

    Label:
        id: Number_1_text
        color: .1,.1,.1, 1
        text: " "
        pos: -100,100
        font_size: 25

    Label:
        id: Number_2_text
        color: .1,.1,.1, 1
        text: " "
        pos: -50,100
        font_size: 25

    Label:
        id: Number_3_text
        color: .1,.1,.1, 1
        text: " "
        pos: 0,100
        font_size: 25

    Label:
        id: Number_4_text
        color: .1,.1,.1, 1
        text: " "
        pos: 50,100
        font_size: 25

    Label:
        id: Number_5_text
        color: .1,.1,.1, 1
        text: " "
        pos: 100,100
        font_size: 25

    Label:
        text: "_"
        color: .1,.1,.1, 1
        pos: -100,95
        font_size: 25

    Label:
        text: "_"
        color: .1,.1,.1, 1
        pos: -50,95
        font_size: 25

    Label:
        text: "_"
        color: .1,.1,.1, 1
        pos: 0,95
        font_size: 25

    Label:
        text: "_"
        color: .1,.1,.1, 1
        pos: 50,95
        font_size: 25

    Label:
        text: "_"
        color: .1,.1,.1, 1
        pos: 100,95
        font_size: 25

    GridLayout:

        cols: 3
        size: 20, 10
        padding: 20
        spacing: 5
        pos_hint: {'top': 0.55, 'bottom': 1.5}
        row_default_height: 40
        row_force_default: True

        Button:
            id: Number_1
            background_color: 100,100,100,1
            color: .1,.1,.1, 1
            text: "1"
            font_size: 20
            size_hint: .15, .1
            on_press:  root.Password_add(self)

        Button:
            id: Number_2
            background_color: 100,100,100,1
            color: .1,.1,.1, 1
            text: "2"
            font_size: 20
            size_hint: .15, .1
            on_press: root.Password_add(self)


        Button:
            id: Number_3
            background_color: 100,100,100,1
            color: .1,.1,.1, 1
            text: "3"
            font_size: 20
            size_hint: .15, .1
            on_press: root.Password_add(self)

        Button:
            id: Number_4
            background_color: 100,100,100,1
            color: .1,.1,.1, 1
            text: "4"
            font_size: 20
            size_hint: .15, .1
            on_press: root.Password_add(self)

        Button:
            id: Number_5
            background_color: 100,100,100,1
            color: .1,.1,.1, 1
            text: "5"
            font_size: 20
            size_hint: .15, .1
            on_press: root.Password_add(self)

        Button:
            id: Number_6
            background_color: 100,100,100,1
            text: "6"
            color: .1,.1,.1, 1
            font_size: 20
            size_hint: .15, .1
            on_press: root.Password_add(self)

        Button:
            id: Number_7
            text: "7"
            background_color: 100,100,100,1
            color: .1,.1,.1, 1
            font_size: 20
            size_hint: .15, .1
            on_press: root.Password_add(self)

        Button:
            id: Number_8
            text: "8"
            background_color: 100,100,100,1
            color: .1,.1,.1, 1
            font_size: 20
            size_hint: .15, .1
            on_press: root.Password_add(self)

        Button:
            id: Number_9
            text: "9"
            background_color: 100,100,100,1
            color: .1,.1,.1, 1
            font_size: 20
            size_hint: .15, .1
            on_press: root.Password_add(self)

        Label:
            text: ""
            size_hint: .15, .1

        Button:
            id: Number_0
            text: "0"
            background_color: 100,100,100,1
            color: .1,.1,.1, 1
            font_size: 20
            size_hint: .15, .1
            on_press: root.Password_add(self)

        Button:
            id: Clear
            background_color: 100,100,100,1
            color: .1,.1,.1, 1
            text: "<"
            font_size: 20
            size_hint: .15, .1
            on_press: root.Password_clear(self)

<WindowsPay>:
    on_enter: root.Credit_Card()

    number_Card_For_Transfer:number_card_for_transfer
    money_For_Transfer:money_for_transfer

    MDToolbar:
        title: "Перевод на другую карту"
        elevation: 5
        pos_hint: {"top": 1.015}
        md_bg_color: 0.28,0.28,0.28,1
        specific_text_color: 0,72,35,1

    Label:
        text: "Номер карты:"
        color: .1,.1,.1, 1
        font_size: 20
        pos_hint: {'top': 1.33, 'center_x': .25}

    Label:
        text: "Сумма:"
        color: .1,.1,.1, 1
        font_size: 20
        pos_hint: {'top': 1.15, 'center_x': .16}

    TextInput:
        id:number_card_for_transfer
        multiline: False
        size_hint: 0.6, 0.065
        background_color: 1.2,1.2,1.2,1
        password: False
        pos_hint: {'center_x': 0.32, 'center_y': 0.75}
        font_size: 18

    TextInput:
        id:money_for_transfer
        multiline: False
        size_hint: 0.35, 0.065
        background_color: 1.2,1.2,1.2,1
        password: False
        pos_hint: {'center_x': .20, 'top': 0.60}
        font_size: 18

    Label:
        text:"₽"
        color: .1,.1,.1, 1
        font_size: 23
        pos_hint: { 'center_x': .41, 'top': 1.07}

    Label:
        text:"Списать со счета"
        color: .1,.1,.1, 1
        font_size: 18
        pos_hint: { 'center_x': .50, 'top': 0.94}

    GridLayout:
        cols: 1
        size: 10, 10
        padding: 2.5
        spacing: 2
        pos_hint: {'top': 0.22, 'bottom': 1.5}
        row_default_height: 50
        row_force_default: True

        Button:
            size_hint: 0.90,0.1
            text: "Перевести"
            color: 0,.76,.91, 1
            font_size: 25
            halign: 'center'
            valign: 'center'
            text_size: 325,325
            on_press: root.Transfer()

        Button:
            size_hint: 0.90,0.1
            text: "Вернуться в меню"
            color: 0,.76,.91, 1
            font_size: 25
            halign: 'center'
            valign: 'center'
            text_size: 325,325
            on_press: root.Back_Menu()

    ScrollView:
        size_hint: 1, .2
        pos_hint: {'top': 0.45, 'center_x': .70}

        MDList:
            id: osnova_credit_card


<WindowsPaySuccess>:

    MDToolbar:
        title: "Перевод на другую карту"
        elevation: 5
        pos_hint: {"top": 1.015}
        md_bg_color: 0.28,0.28,0.28,1
        specific_text_color: 0,72,35,1